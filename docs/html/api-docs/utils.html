

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>utils &mdash; OpenSeq2Seq 0.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="tacotron" href="parts.tacotron.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> OpenSeq2Seq
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine-translation.html">Machine Translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech-recognition.html">Speech Recognition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech-synthesis.html">Speech Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distr-training.html">Distributed training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mixed-precision.html">Mixed precision training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../in-depth-tutorials.html">In-depth tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive-infer-demos.html">Interactive Infer Mode</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="models.html">models</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">data</a></li>
<li class="toctree-l2"><a class="reference internal" href="encoders.html">encoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="decoders.html">decoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="losses.html">losses</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimizers.html">optimizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="parts.html">parts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.funcs">funcs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.hooks">hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">utils</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OpenSeq2Seq</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">API documentation</a> &raquo;</li>
        
      <li>utils</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api-docs/utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-utils">
<span id="utils"></span><h1>utils<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-utils.funcs">
<span id="funcs"></span><h2>funcs<a class="headerlink" href="#module-utils.funcs" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.funcs.evaluate">
<code class="descclassname">utils.funcs.</code><code class="descname">evaluate</code><span class="sig-paren">(</span><em>model</em>, <em>checkpoint</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/funcs.html#evaluate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.funcs.evaluate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.funcs.infer">
<code class="descclassname">utils.funcs.</code><code class="descname">infer</code><span class="sig-paren">(</span><em>model</em>, <em>checkpoint</em>, <em>output_file</em>, <em>use_trt=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/funcs.html#infer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.funcs.infer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.funcs.restore_and_get_results">
<code class="descclassname">utils.funcs.</code><code class="descname">restore_and_get_results</code><span class="sig-paren">(</span><em>model</em>, <em>checkpoint</em>, <em>mode</em>, <em>use_trt=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/funcs.html#restore_and_get_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.funcs.restore_and_get_results" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.funcs.train">
<code class="descclassname">utils.funcs.</code><code class="descname">train</code><span class="sig-paren">(</span><em>train_model</em>, <em>eval_model=None</em>, <em>debug_port=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/funcs.html#train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.funcs.train" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-utils.hooks">
<span id="hooks"></span><h2>hooks<a class="headerlink" href="#module-utils.hooks" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="utils.hooks.BroadcastGlobalVariablesHook">
<em class="property">class </em><code class="descclassname">utils.hooks.</code><code class="descname">BroadcastGlobalVariablesHook</code><span class="sig-paren">(</span><em>root_rank</em>, <em>device=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#BroadcastGlobalVariablesHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.BroadcastGlobalVariablesHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.training.session_run_hook.SessionRunHook</span></code></p>
<p>SessionRunHook that will broadcast all global variables from root rank
to all other processes during initialization.
This is necessary to ensure consistent initialization of all workers when
training is started with random weights or restored from a checkpoint.</p>
<dl class="method">
<dt id="utils.hooks.BroadcastGlobalVariablesHook.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>root_rank</em>, <em>device=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#BroadcastGlobalVariablesHook.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.BroadcastGlobalVariablesHook.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new BroadcastGlobalVariablesHook that will broadcast all
global variables from root rank to all other processes during initialization.
:param root_rank: Rank that will send data, other ranks will receive data.
:param device: Device to be used for broadcasting. Uses GPU by default</p>
<blockquote>
<div>if Horovod was build with HOROVOD_GPU_BROADCAST.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.BroadcastGlobalVariablesHook.after_create_session">
<code class="descname">after_create_session</code><span class="sig-paren">(</span><em>session</em>, <em>coord</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#BroadcastGlobalVariablesHook.after_create_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.BroadcastGlobalVariablesHook.after_create_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when new TensorFlow session is created.</p>
<p>This is called to signal the hooks that a new session has been created. This
has two essential differences with the situation in which <cite>begin</cite> is called:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>When this is called, the graph is finalized and ops can no longer be added</dt>
<dd>to the graph.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>This method will also be called as a result of recovering a wrapped</dt>
<dd>session, not only at the beginning of the overall session.</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>session</strong> – A TensorFlow Session that has been created.</li>
<li><strong>coord</strong> – A Coordinator object which keeps track of all threads.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.BroadcastGlobalVariablesHook.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#BroadcastGlobalVariablesHook.begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.BroadcastGlobalVariablesHook.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once before using the session.</p>
<p>When called, the default graph is the one that will be launched in the
session.  The hook can modify the graph by adding new operations to it.
After the <cite>begin()</cite> call the graph will be finalized and the other callbacks
can not modify the graph anymore. Second call of <cite>begin()</cite> on the same
graph, should not change the graph.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils.hooks.PrintLossAndTimeHook">
<em class="property">class </em><code class="descclassname">utils.hooks.</code><code class="descname">PrintLossAndTimeHook</code><span class="sig-paren">(</span><em>every_steps</em>, <em>model</em>, <em>print_ppl=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintLossAndTimeHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintLossAndTimeHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.training.session_run_hook.SessionRunHook</span></code></p>
<p>Session hook that prints training samples and prediction from time to time</p>
<dl class="method">
<dt id="utils.hooks.PrintLossAndTimeHook.after_run">
<code class="descname">after_run</code><span class="sig-paren">(</span><em>run_context</em>, <em>run_values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintLossAndTimeHook.after_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintLossAndTimeHook.after_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after each call to run().</p>
<p>The <cite>run_values</cite> argument contains results of requested ops/tensors by
<cite>before_run()</cite>.</p>
<p>The <cite>run_context</cite> argument is the same one send to <cite>before_run</cite> call.
<cite>run_context.request_stop()</cite> can be called to stop the iteration.</p>
<p>If <cite>session.run()</cite> raises any exceptions then <cite>after_run()</cite> is not called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>run_context</strong> – A <cite>SessionRunContext</cite> object.</li>
<li><strong>run_values</strong> – A SessionRunValues object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.PrintLossAndTimeHook.before_run">
<code class="descname">before_run</code><span class="sig-paren">(</span><em>run_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintLossAndTimeHook.before_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintLossAndTimeHook.before_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before each call to run().</p>
<p>You can return from this call a <cite>SessionRunArgs</cite> object indicating ops or
tensors to add to the upcoming <cite>run()</cite> call.  These ops/tensors will be run
together with the ops/tensors originally passed to the original run() call.
The run args you return can also contain feeds to be added to the run()
call.</p>
<p>The <cite>run_context</cite> argument is a <cite>SessionRunContext</cite> that provides
information about the upcoming <cite>run()</cite> call: the originally requested
op/tensors, the TensorFlow Session.</p>
<p>At this point graph is finalized and you can not add ops.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>run_context</strong> – A <cite>SessionRunContext</cite> object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None or a <cite>SessionRunArgs</cite> object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.PrintLossAndTimeHook.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintLossAndTimeHook.begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintLossAndTimeHook.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once before using the session.</p>
<p>When called, the default graph is the one that will be launched in the
session.  The hook can modify the graph by adding new operations to it.
After the <cite>begin()</cite> call the graph will be finalized and the other callbacks
can not modify the graph anymore. Second call of <cite>begin()</cite> on the same
graph, should not change the graph.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils.hooks.PrintSamplesHook">
<em class="property">class </em><code class="descclassname">utils.hooks.</code><code class="descname">PrintSamplesHook</code><span class="sig-paren">(</span><em>every_steps</em>, <em>model</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintSamplesHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintSamplesHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.training.session_run_hook.SessionRunHook</span></code></p>
<p>Session hook that prints training samples and prediction from time to time</p>
<dl class="method">
<dt id="utils.hooks.PrintSamplesHook.after_run">
<code class="descname">after_run</code><span class="sig-paren">(</span><em>run_context</em>, <em>run_values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintSamplesHook.after_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintSamplesHook.after_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after each call to run().</p>
<p>The <cite>run_values</cite> argument contains results of requested ops/tensors by
<cite>before_run()</cite>.</p>
<p>The <cite>run_context</cite> argument is the same one send to <cite>before_run</cite> call.
<cite>run_context.request_stop()</cite> can be called to stop the iteration.</p>
<p>If <cite>session.run()</cite> raises any exceptions then <cite>after_run()</cite> is not called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>run_context</strong> – A <cite>SessionRunContext</cite> object.</li>
<li><strong>run_values</strong> – A SessionRunValues object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.PrintSamplesHook.before_run">
<code class="descname">before_run</code><span class="sig-paren">(</span><em>run_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintSamplesHook.before_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintSamplesHook.before_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before each call to run().</p>
<p>You can return from this call a <cite>SessionRunArgs</cite> object indicating ops or
tensors to add to the upcoming <cite>run()</cite> call.  These ops/tensors will be run
together with the ops/tensors originally passed to the original run() call.
The run args you return can also contain feeds to be added to the run()
call.</p>
<p>The <cite>run_context</cite> argument is a <cite>SessionRunContext</cite> that provides
information about the upcoming <cite>run()</cite> call: the originally requested
op/tensors, the TensorFlow Session.</p>
<p>At this point graph is finalized and you can not add ops.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>run_context</strong> – A <cite>SessionRunContext</cite> object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None or a <cite>SessionRunArgs</cite> object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.PrintSamplesHook.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#PrintSamplesHook.begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.PrintSamplesHook.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once before using the session.</p>
<p>When called, the default graph is the one that will be launched in the
session.  The hook can modify the graph by adding new operations to it.
After the <cite>begin()</cite> call the graph will be finalized and the other callbacks
can not modify the graph anymore. Second call of <cite>begin()</cite> on the same
graph, should not change the graph.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils.hooks.RunEvaluationHook">
<em class="property">class </em><code class="descclassname">utils.hooks.</code><code class="descname">RunEvaluationHook</code><span class="sig-paren">(</span><em>every_steps</em>, <em>model</em>, <em>last_step=-1</em>, <em>print_ppl=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#RunEvaluationHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.RunEvaluationHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.training.session_run_hook.SessionRunHook</span></code></p>
<p>Session hook that runs evaluation on a validation set</p>
<dl class="method">
<dt id="utils.hooks.RunEvaluationHook.after_run">
<code class="descname">after_run</code><span class="sig-paren">(</span><em>run_context</em>, <em>run_values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#RunEvaluationHook.after_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.RunEvaluationHook.after_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after each call to run().</p>
<p>The <cite>run_values</cite> argument contains results of requested ops/tensors by
<cite>before_run()</cite>.</p>
<p>The <cite>run_context</cite> argument is the same one send to <cite>before_run</cite> call.
<cite>run_context.request_stop()</cite> can be called to stop the iteration.</p>
<p>If <cite>session.run()</cite> raises any exceptions then <cite>after_run()</cite> is not called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>run_context</strong> – A <cite>SessionRunContext</cite> object.</li>
<li><strong>run_values</strong> – A SessionRunValues object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.RunEvaluationHook.before_run">
<code class="descname">before_run</code><span class="sig-paren">(</span><em>run_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#RunEvaluationHook.before_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.RunEvaluationHook.before_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before each call to run().</p>
<p>You can return from this call a <cite>SessionRunArgs</cite> object indicating ops or
tensors to add to the upcoming <cite>run()</cite> call.  These ops/tensors will be run
together with the ops/tensors originally passed to the original run() call.
The run args you return can also contain feeds to be added to the run()
call.</p>
<p>The <cite>run_context</cite> argument is a <cite>SessionRunContext</cite> that provides
information about the upcoming <cite>run()</cite> call: the originally requested
op/tensors, the TensorFlow Session.</p>
<p>At this point graph is finalized and you can not add ops.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>run_context</strong> – A <cite>SessionRunContext</cite> object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None or a <cite>SessionRunArgs</cite> object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.hooks.RunEvaluationHook.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/hooks.html#RunEvaluationHook.begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.hooks.RunEvaluationHook.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once before using the session.</p>
<p>When called, the default graph is the one that will be launched in the
session.  The hook can modify the graph by adding new operations to it.
After the <cite>begin()</cite> call the graph will be finalized and the other callbacks
can not modify the graph anymore. Second call of <cite>begin()</cite> on the same
graph, should not change the graph.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id1">
<h2>utils<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-utils.utils"></span><dl class="class">
<dt id="utils.utils.Logger">
<em class="property">class </em><code class="descclassname">utils.utils.</code><code class="descname">Logger</code><span class="sig-paren">(</span><em>stream</em>, <em>log_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#Logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.Logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="utils.utils.Logger.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#Logger.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.Logger.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="utils.utils.Logger.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#Logger.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.Logger.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="utils.utils.array_to_string">
<code class="descclassname">utils.utils.</code><code class="descname">array_to_string</code><span class="sig-paren">(</span><em>row</em>, <em>vocab</em>, <em>delim=' '</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#array_to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.array_to_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.cast_types">
<code class="descclassname">utils.utils.</code><code class="descname">cast_types</code><span class="sig-paren">(</span><em>input_dict</em>, <em>dtype</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#cast_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.cast_types" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.check_logdir">
<code class="descclassname">utils.utils.</code><code class="descname">check_logdir</code><span class="sig-paren">(</span><em>args</em>, <em>base_config</em>, <em>restore_best_checkpoint=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#check_logdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.check_logdir" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function that ensures the logdir is setup correctly</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> (<em>dict</em>) – Dictionary as returned from get_base_config()</li>
<li><strong>base_config</strong> (<em>dict</em>) – Dictionary as returned from get_base_config()</li>
<li><strong>restore_best_checkpoint</strong> (<em>bool</em>) – If True, will look for ckpt_dir + /best_models</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>Either None if continue-learning is not set and training, or</dt>
<dd><p class="first last">the name of the checkpoint used to restore the model</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">checkpoint</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.utils.check_params">
<code class="descclassname">utils.utils.</code><code class="descname">check_params</code><span class="sig-paren">(</span><em>config</em>, <em>required_dict</em>, <em>optional_dict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#check_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.check_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.clip_last_batch">
<code class="descclassname">utils.utils.</code><code class="descname">clip_last_batch</code><span class="sig-paren">(</span><em>last_batch</em>, <em>true_size</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#clip_last_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.clip_last_batch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.clip_sparse">
<code class="descclassname">utils.utils.</code><code class="descname">clip_sparse</code><span class="sig-paren">(</span><em>value</em>, <em>size</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#clip_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.clip_sparse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.collect_if_horovod">
<code class="descclassname">utils.utils.</code><code class="descname">collect_if_horovod</code><span class="sig-paren">(</span><em>value</em>, <em>hvd</em>, <em>mode='sum'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#collect_if_horovod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.collect_if_horovod" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects values from all workers if run on Horovod.
Note, that on all workers except first this function will return None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value</strong> – value to collect.</li>
<li><strong>hvd</strong> – horovod.tensorflow module or None</li>
<li><strong>mode</strong> – could be “sum”, “mean” or “gather”, indicating reduce_sum or gather.
For “sum” and “mean” value has to be numerical, for “gather”, value has
to be iterable.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">collected results if run on Horovod or value otherwise.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.utils.create_logdir">
<code class="descclassname">utils.utils.</code><code class="descname">create_logdir</code><span class="sig-paren">(</span><em>args</em>, <em>base_config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#create_logdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.create_logdir" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function that ensures the logdir and log files are setup corretly.
Only called in –enable_logs is set.</p>
<blockquote>
<div><dl class="docutils">
<dt>Args:</dt>
<dd>args (dict): Dictionary as returned from get_base_config()
base_config (dict): Dictionary as returned from get_base_config()</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Some objects that need to be cleaned up in run.py</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.utils.create_model">
<code class="descclassname">utils.utils.</code><code class="descname">create_model</code><span class="sig-paren">(</span><em>args</em>, <em>base_config</em>, <em>config_module</em>, <em>base_model</em>, <em>hvd</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#create_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.create_model" title="Permalink to this definition">¶</a></dt>
<dd><p>A helpful function that creates the train, eval, and infer models as
needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> (<em>dict</em>) – Dictionary as returned from get_base_config()</li>
<li><strong>base_config</strong> (<em>dict</em>) – Dictionary as returned from get_base_config()</li>
<li><strong>config_module</strong> – config_module as returned from get_base_config()</li>
<li><strong>base_model</strong> (<em>OpenSeq2Seq model</em>) – Dictionary as returned from
get_base_config()</li>
<li><strong>hvd</strong> – Either None if Horovod is not enabled, or the Horovod library</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>A compiled model. For the ‘train_eval’ mode, a tuple containing the</dt>
<dd><p class="first last">(train_model, eval_model) is returned.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">model</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.utils.deco_print">
<code class="descclassname">utils.utils.</code><code class="descname">deco_print</code><span class="sig-paren">(</span><em>line</em>, <em>offset=0</em>, <em>start='*** '</em>, <em>end='\n'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#deco_print"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.deco_print" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.flatten_dict">
<code class="descclassname">utils.utils.</code><code class="descname">flatten_dict</code><span class="sig-paren">(</span><em>dct</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#flatten_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.flatten_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.get_available_gpus">
<code class="descclassname">utils.utils.</code><code class="descname">get_available_gpus</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#get_available_gpus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.get_available_gpus" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.get_base_config">
<code class="descclassname">utils.utils.</code><code class="descname">get_base_config</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#get_base_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.get_base_config" title="Permalink to this definition">¶</a></dt>
<dd><p>This function parses the command line arguments, reads the config file, and
gets the base_model from the config.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>str</em>) – The command line arugments</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Returns</dt>
<dd><p class="first">args (dict): The arguments parsed into a dictionary
base_config (dict): The config read from the file and ammended with the</p>
<blockquote>
<div>command line arguments</div></blockquote>
<p class="last">base_model (OpenSeq2Seq model): The model specified in the config file
config_module (dict): The raw config file processed by runpy</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.utils.get_git_diff">
<code class="descclassname">utils.utils.</code><code class="descname">get_git_diff</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#get_git_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.get_git_diff" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.get_git_hash">
<code class="descclassname">utils.utils.</code><code class="descname">get_git_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#get_git_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.get_git_hash" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.get_interactive_infer_results">
<code class="descclassname">utils.utils.</code><code class="descname">get_interactive_infer_results</code><span class="sig-paren">(</span><em>model</em>, <em>sess</em>, <em>model_in</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#get_interactive_infer_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.get_interactive_infer_results" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.get_results_for_epoch">
<code class="descclassname">utils.utils.</code><code class="descname">get_results_for_epoch</code><span class="sig-paren">(</span><em>model</em>, <em>sess</em>, <em>compute_loss</em>, <em>mode</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#get_results_for_epoch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.get_results_for_epoch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.iterate_data">
<code class="descclassname">utils.utils.</code><code class="descname">iterate_data</code><span class="sig-paren">(</span><em>model</em>, <em>sess</em>, <em>compute_loss</em>, <em>mode</em>, <em>verbose</em>, <em>num_steps=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#iterate_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.iterate_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.log_summaries_from_dict">
<code class="descclassname">utils.utils.</code><code class="descname">log_summaries_from_dict</code><span class="sig-paren">(</span><em>dict_to_log</em>, <em>output_dir</em>, <em>step</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#log_summaries_from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.log_summaries_from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that writes values from dict_to_log to a tensorboard
log file inside output_dir.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dict_to_log</strong> (<em>dict</em>) – A dictiontary containing the tags and scalar values to log.
The dictionary values could also contain tf.Summary.Value objects
to support logging of image and audio data. In this mode, the
dictionary key is ignored, as tf.Summary.Value already contains a
tag.</li>
<li><strong>output_dir</strong> (<em>str</em>) – dir containing the tensorboard file</li>
<li><strong>step</strong> (<em>int</em>) – current training step</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.utils.mask_nans">
<code class="descclassname">utils.utils.</code><code class="descname">mask_nans</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#mask_nans"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.mask_nans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.nest_dict">
<code class="descclassname">utils.utils.</code><code class="descname">nest_dict</code><span class="sig-paren">(</span><em>flat_dict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#nest_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.nest_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.nested_update">
<code class="descclassname">utils.utils.</code><code class="descname">nested_update</code><span class="sig-paren">(</span><em>org_dict</em>, <em>upd_dict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#nested_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.nested_update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.utils.text_ids_to_string">
<code class="descclassname">utils.utils.</code><code class="descname">text_ids_to_string</code><span class="sig-paren">(</span><em>row</em>, <em>vocab</em>, <em>S_ID</em>, <em>EOS_ID</em>, <em>PAD_ID</em>, <em>ignore_special=False</em>, <em>delim=' '</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/utils/utils.html#text_ids_to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.text_ids_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>For _-to-text outputs this function takes a row with ids,
target vocabulary and prints it as a human-readable string</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="parts.tacotron.html" class="btn btn-neutral" title="tacotron" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, NVIDIA.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script>  
  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #64d81c;
    }
    .wy-side-nav-search > div.version {
      color: #ffffff;
    }
    .wy-side-nav-search > img {
      max-width: 150px;
    }
    .wy-side-nav-search > a {
      font-size: 23px;
    }
  </style>


</body>
</html>